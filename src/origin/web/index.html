<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>MiniFlix Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
body {
  margin: 0;
  padding: 0;
  font-family: system-ui, sans-serif;

  /* Cinematic gradient */
  background: linear-gradient(
    to bottom,
    #b20000,   /* bright red */
    #600000,   /* deep red */
    #000000    /* black */
  );

  min-height: 100vh;
  color: white;
}

video {
  width: 100%;
  max-width: 960px;
  background: black;
  border: 2px solid #aa0000;    /* subtle red edge */
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
}

h1 {
  text-shadow: 0 0 10px rgba(255, 0, 0, 0.6);
}

.logo img {
  animation: fadein 1.5s ease-out;
  height: 50px;       /* ← adjust until it matches your old <h1> */
  width: auto;
  display: block;
  margin: 0 auto;
  filter: drop-shadow(0 0 6px rgba(255,0,0,0.4));
}


@keyframes fadein {
  from { opacity: 0; transform: translateY(-10px); }
  to   { opacity: 1; transform: translateY(0); }

#player-container {
  width: 640px;       /* or 720px or whatever */
  margin: 40px auto;  /* center on page */
}

#video {
  width: 100%;
  height: auto;
  background: #000;
  border-radius: 8px;
}

}
</style>
</head>
<body>
  <div class="logo">
  <img src="miniflix.png" alt="MiniFlix Logo">
  </div>
  <div id="player-container">
    <video id="video" controls></video>
  </div>

  <div class="row">
    <p>RTMP ingest: <code>rtmp://localhost/live/in</code></p>
    <p>HLS URL: <code>http://localhost:8080/hls/rtmp.m3u8</code></p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const baseUrl = '/hls/rtmp.m3u8';
    const url = baseUrl + '?t=' + Date.now(); // cache-buster

    const video = document.getElementById('video');

    if (Hls.isSupported()) {
      const hls = new Hls({
        liveSyncDuration: 2,         // try to stay ~2s behind live
        liveMaxLatencyDuration: 4,   // don’t drift too far back
        maxLiveSyncPlaybackRate: 1.1 // slightly speed up if we fall behind
      });

      hls.loadSource(url);
      hls.attachMedia(video);
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = url;
    }
 </script>
</body>
</html>
